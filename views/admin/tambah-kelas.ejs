<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="../assets/bootstrap/css/bootstrap.min.css" />
  <link rel="stylesheet" href="../assets/css/tambah-ujian.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://kit.fontawesome.com/66d4c07337.js" crossorigin="anonymous"></script>
  <!-- Datepicker -->
  <!--
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/css/bootstrap-datetimepicker.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/js/bootstrap-datetimepicker.min.js"></script> -->
  <title>Document</title>
</head>

<body>
  <style>
    .selected {
      background-color: cornflowerblue;
      color: white;
    }
  </style>
  <!-- Navbar -->
  <!-- <nav class="navbar navbar-dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">
          <div class="row justify-content-center align-items-center">
            <div class="col">
              <img src="../assets/img/logo.png" alt="" width="60px" height="auto" class="align-text-top" />
            </div>
            <div class="col">
              <div class="text">Sistem Ujian Online</div>
              <div class="text">SMKN 4 MALANG</div>
            </div>
          </div>
        </a>
      </div>
    </nav> -->
  <!-- /Navbar -->
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">
        <div class="row justify-content-center align-items-center">
          <div class="col">
            <img src="../assets/img/logo.png" alt="" width="60px" height="auto" class="align-text-top" />
          </div>
          <div class="col">
            <div class="text">Sistem Ujian Online</div>
            <div class="text">SMKN 4 MALANG</div>
          </div>
        </div>
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse text-center navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link" aria-current="page" href="/admin/tambah-jurusan?attribute=all">Data Jurusan</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="/admin/tambah-kelas?attribute=all">Data Kelas</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" aria-current="page" href="/admin/tambah-mapel?attribute=all">Data Mapel</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/admin/siswa/data?attribute=all">Data Siswa</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/admin/ujian/jadwal?attribute=all">Data Ujian</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" aria-current="page" href="/admin/guru/data?attribute=all">Data Nilai</a>
          </li>

          <li class="nav-item ps-3 pe-3">
            <div class="dropstart profil">
              <a class="" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                <img src="../assets/img/default.png" alt="" /> </a>

              <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                <li><a class="dropdown-item disabled" href="#">Profile</a></li>
                <li><a class="dropdown-item" href="/log/out">Logout</a></li>
              </ul>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <!-- Akhir Navbar -->
  <!-- Content -->
  <div class="container-fluid" style="height: 100%;">
    <div class="row">
      <div class="col-md-4 form-ujian">
        <div class="col text-dark">
          <h2>Tambah Kelas</h2>
        </div>
        <div class="col">
          <form action="/admin/tambah-kelas?attribute=<%= selected %>" method="POST">
            <div class="mb-3">
              <%- include('./../partials/message.ejs') %>
            </div>
            <div class="mb-3">
              <label for="tingkat" class="form-label">Kelas</label>
              <div class="input-group">
                <select name="tingkat" class="form-control" id="tingkat">
                  <option value="" hidden>Pilih Kelas</option>
                  <option value="X">X</option>
                  <option value="XI">XI</option>
                  <option value="XII">XII</option>
                  <option value="XIII">XIII</option>
                </select>
                <!-- <input type="text" value="<%= valJurusan.tingkat %>" name="tingkat" class="form-control" id="tingkat" /> -->
              </div>
            </div>
            <div class="mb-3">
              <label for="jurusan" class="form-label">Jurusan</label>
              <div class="input-group">
                <select class="form-control select-form" id="jurusan" name="jurusan">
                  <option value="" hidden>Pilih Jurusan</option>
                  <% jurusan.forEach(x => { %>
                    <option value="<%= x.kode %>"><%= x.nama %></option>
                  <% }) %>
                </select>
                <!-- <input type="text" value="<%= valJurusan.jurusan %>" name="" class="form-control" id="jurusan" aria-describedby="NIS" /> -->
              </div> 
            </div>
            <div class="mb-3">
              <label for="kelas" class="form-label">Kode Kelas</label>
              <div class="input-group">
                <input type="text" value="<%= valJurusan.kelas %>" name="kelas" class="form-control" id="kelas" aria-describedby="kelas" />
              </div>
            </div>

            <button type="submit" class="btn btn-primary form-control">Tambah</button>
          </form>
        </div>
      </div>
      <div class="col-md-8 mt-5 table-responsive text-center">
        <table class="table bg-red" style="vertical-align: middle">
          <thead style="background: #0d6efd; color: white">
            <tr style="white-space: nowrap;">
              <th>No</th>
              <th>Tingkat</th>
              <th>Jurusan</th>
              <th>Kelas</th>
              <th style="text-align: center; width: 7.5rem;">Aksi</th>
              <th class="close-selected"></th>
            </tr>
          </thead>
          <tbody class="body-list-jurusan" data-selected="<%= selected %>" data-datalength="<%= jurusan.length %>">
            <% let i = 1 %>
            <% if( selected != '' ) { %>
              <% data.forEach(x => { %>
                <tr>
                  <td><%= i++ %></td>
                  <td><%= x.tingkat %></td>
                  <td class="td-jurusan"><%= x.jurusan %></td>
                  <td><%= x.kelas %></td>
                  <td style="text-align: center;">
                    <a class="btn btn-danger del-jurusan" data-href="/admin/tambah-kelas?attribute=<%= x.id %>&del=jurusan" role="button"><i class='fas fa-trash-alt'></i></a>
                  </td>
                  <td class="close-selected" style="text-align: right;"></td>
                </tr>
              <% }) %>
            <% } %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <!-- /Content -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0"
    crossorigin="anonymous"></script>

<footer style="background-color: rgb(220, 220, 220); position: static; bottom: 0%;">
  <div class="footer mt-5">
    <div class="container pt-4" style="text-align: center;">
      UJIO | 
      Copyright <i class='far fa-copyright' style="font-size: smaller;"></i> 2022
    </div>
  </div>
</footer>
</body>
<script>
  if( document.querySelector('.table .body-list-jurusan').dataset.selected != '' ) {
    document.querySelectorAll('.del-jurusan').forEach(x => {
      x.addEventListener('click', function(e) {
        let cnf = confirm('Apakah anda yakin?')
        if( cnf == true ) window.location.href = this.dataset.href
      })
    })
    document.querySelectorAll('.table .body-list-jurusan tr').forEach(x => {
      if( document.querySelector('.table .body-list-jurusan').dataset.selected == x.firstElementChild.nextElementSibling.innerText ) {
        x.classList.add('selected')
      } else {
        x.classList.remove('selected')
      }
    })
    if( document.querySelector('.selected') != null ) {
      document.querySelector('.selected').lastElementChild.innerHTML += `<i style="cursor: pointer;" class="fa fa-close"></i>`
    }
  }

  document.querySelectorAll('.td-jurusan').forEach(x => {
    let alp = x.innerText.split(',')
    if( alp.length == document.querySelector('.body-list-jurusan').dataset.datalength ) {
      x.innerText = 'Semua Jurusan'
    }
  })

  if( document.querySelector('.selected') != null ) {
    document.querySelector('.selected .fa-close').addEventListener('click', function(e) {
      window.location.href = '/admin/tambah-kelas?attribute=all'
    })
  }
</script>
</html>